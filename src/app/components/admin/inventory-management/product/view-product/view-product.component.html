<c-modal id="liveDemoModal" size="lg" alignment="center" class="modal-scrollable" [visible]="visible"
  (visibleChange)="changeModalVisibility($event)">
  <c-modal-header>
    <h5 cModalTitle> Add New Product</h5>
    <button (click)="closeModal()" cButtonClose></button>
  </c-modal-header>
  <c-modal-body>
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="p-2">
      <h6 class="mb-3">Product Information</h6>

      <c-row class="mb-3">
        <c-col md="6">
          <label cLabel for="item">Item</label>
          <select id="item" class="form-select" formControlName="item" (change)="onItemChange($event.target)">
            <option value="">-- Select Item --</option>
            <option *ngFor="let i of items" [value]="i.id">{{ i.name }}</option>
          </select>
        </c-col>

        <c-col md="6">
          <label cLabel for="batch">Batch</label>
          <select id="batch" class="form-select" formControlName="batch" (change)="onBatchChange($event.target)">
            <option value="">-- Select Batch --</option>
            <option *ngFor="let b of batches" [value]="b.id">{{ b.name }}</option>
          </select>
        </c-col>
      </c-row>

      <!-- Row 2: Auto-loaded details -->
      <div *ngIf="selectedItemDetails || selectedBatchDetails" class="mb-3">
        <c-row>
          <c-col md="6" class="mb-2" *ngIf="selectedItemDetails">
            <div class="border rounded p-3 bg-light">
              <h6 class="mb-2 text-secondary fw-bold">Item Details</h6>
              <p class="mb-1"><strong>Category:</strong> {{ selectedItemDetails.category }}</p>
              <p class="mb-1"><strong>Stock:</strong> {{ selectedItemDetails.stock }}</p>
              <p class="mb-0"><strong>Supplier:</strong> {{ selectedItemDetails.supplier }}</p>
            </div>
          </c-col>

          <c-col md="6" *ngIf="selectedBatchDetails">
            <div class="border rounded p-3 bg-light">
              <h6 class="mb-2 text-secondary fw-bold">Batch Details</h6>
              <p class="mb-1"><strong>Batch No:</strong> {{ selectedBatchDetails.batchNo }}</p>
              <p class="mb-1"><strong>Manufacture Date:</strong> {{ selectedBatchDetails.mfd }}</p>
              <p class="mb-0"><strong>Expiry Date:</strong> {{ selectedBatchDetails.exp }}</p>
            </div>
          </c-col>
        </c-row>
      </div>


      <!-- Row 3: Additional fields -->
      <c-row>
        <c-col md="6">
          <label cLabel for="description">Description</label>
          <input id="description" type="text" class="form-control" formControlName="description" />
        </c-col>

        <c-col md="6">
          <label cLabel for="quantity">Quantity</label>
          <input id="quantity" type="number" class="form-control" formControlName="quantity" />
        </c-col>
      </c-row>

      <c-row class="mt-3">
        <c-col md="6">
          <label cLabel for="price">Price</label>
          <input id="price" type="number" class="form-control" formControlName="price" />
        </c-col>

        <c-col md="6">
          <label cLabel for="minSalesPrice">Min Sales Price</label>
          <input id="minSalesPrice" type="number" class="form-control" formControlName="minSalesPrice" />
        </c-col>
      </c-row>
    </form>
  </c-modal-body>
  <c-modal-footer>
    <button (click)="closeModal()" cButton color="secondary">
      Close
    </button>
    <button cButton color="primary">Add Employee</button>
  </c-modal-footer>
</c-modal>