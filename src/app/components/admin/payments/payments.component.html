<h6 cTextColor="secondary">OVERVIEW</h6>

<c-row>
  <c-col>
    <c-widget-stat-f [title]="'Bill Count'" class="mb-3" color="primary" padding value="100">
      <ng-template cTemplateId="widgetIconTemplate">
        <svg cIcon name="cilFile" size="xl" width="24"></svg>
      </ng-template>
      <ng-template cTemplateId="widgetFooterTemplate">
        <div class="d-flex justify-content-between align-items-center w-100">
          <div class="text-secondary"> Today</div>

          <c-dropdown alignment="end" variant="btn-group">
            <button [caret]="false" cButton cDropdownToggle color="transparent" class="p-0 text-secondary">
              <svg cIcon name="cilOptions"></svg>
            </button>
            <div cDropdownMenu>
              <a cDropdownItem>Today</a>
              <a cDropdownItem>This Week</a>
              <a cDropdownItem>This Month</a>
              <a cDropdownItem>This Year</a>
            </div>
          </c-dropdown>
        </div>
      </ng-template>
    </c-widget-stat-f>
  </c-col>

  <c-col>
    <c-widget-stat-f [title]="'Total Payment Received'" class="mb-3" color="success" padding value="75">
      <ng-template cTemplateId="widgetIconTemplate">
        <svg cIcon name="cilMoney" size="xl" width="24"></svg>
      </ng-template>
      <ng-template cTemplateId="widgetFooterTemplate">
        <div class="d-flex justify-content-between align-items-center w-100">
          <div class="text-secondary"> Today</div>

          <c-dropdown alignment="end" variant="btn-group">
            <button [caret]="false" cButton cDropdownToggle color="transparent" class="p-0 text-secondary">
              <svg cIcon name="cilOptions"></svg>
            </button>
            <div cDropdownMenu>
              <a cDropdownItem>Today</a>
              <a cDropdownItem>This Week</a>
              <a cDropdownItem>This Month</a>
              <a cDropdownItem>This Year</a>
            </div>
          </c-dropdown>
        </div>
      </ng-template>
    </c-widget-stat-f>
  </c-col>

  <c-col>
    <c-widget-stat-f [title]="'Pending total amount'" class="mb-3" color="warning" padding value="50">
      <ng-template cTemplateId="widgetIconTemplate">
        <svg cIcon name="cilClock" size="xl" width="24"></svg>
      </ng-template>
      <ng-template cTemplateId="widgetFooterTemplate">
        <div class="d-flex justify-content-between align-items-center w-100">
          <div class="text-secondary"> Today</div>

          <c-dropdown alignment="end" variant="btn-group">
            <button [caret]="false" cButton cDropdownToggle color="transparent" class="p-0 text-secondary">
              <svg cIcon name="cilOptions"></svg>
            </button>
            <div cDropdownMenu>
              <a cDropdownItem>Today</a>
              <a cDropdownItem>This Week</a>
              <a cDropdownItem>This Month</a>
              <a cDropdownItem>This Year</a>
            </div>
          </c-dropdown>
        </div>
      </ng-template>
    </c-widget-stat-f>
  </c-col>
</c-row>

<c-card class="mb-4">
  <c-card-body>
    <c-row class="justify-content-between">
      <c-col sm="5">
        <h4 class="card-title mb-4" id="employee-list">Payments</h4>
      </c-col>
      <c-col xs="auto">
        <button cButton type="button" (click)="openPaymentView()">+ Add Payment</button>
      </c-col>
    </c-row>
    <form cRow class="align-items-end mb-4">
      <c-col xs="auto" class="mb-2">
        <label cLabel for="inputEmail4">Search Payment</label>
        <input cFormControl id="inputEmail4" type="email" />
      </c-col>

      <c-col xs="auto" class="mb-2">
        <label cLabel for="datepicker">From Date</label>
        <div class="input-group">
          <input type="text" placeholder="Choose a date" class="form-control" bsDatepicker />
          <span class="input-group-text bg-white">
            <svg cIcon name="cilCalendar" class="text-secondary"></svg>
          </span>
        </div>
      </c-col>

      <c-col xs="auto" class="mb-2">
        <label cLabel for="datepicker">To Date</label>
        <div class="input-group">
          <input type="text" placeholder="Choose a date" class="form-control" bsDatepicker />
          <span class="input-group-text bg-white">
            <svg cIcon name="cilCalendar" class="text-secondary"></svg>
          </span>
        </div>
      </c-col>

      <c-col xs="auto" class="mb-2 d-flex align-items-center gap-2 flex-wrap">
        <button cButton type="button" variant="outline" color="secondary">
          <svg cIcon name="cilSearch" class="me-2"></svg>Search
        </button>

        <button cButton type="button" variant="outline" color="info">
          <svg cIcon name="cilCloudDownload" class="me-2"></svg>Export
        </button>
      </c-col>
    </form>

    <table [hover]="true" [responsive]="true" [striped]="true" align="middle" cTable class="mb-0 border">
      <thead cTableColor="light">
        <tr>
          <th class="text-center">
            Product ID
          </th>
          <th>Description</th>
          <th class="text-center">Quantity</th>
          <th class="text-center">Price</th>
          <th class="text-center">Min Sale Price</th>
          <th class="text-center">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="!pagedRoutes || pagedRoutes.length === 0">
          <td colspan="6" class="text-center text-muted py-3">
            No data available
          </td>
        </tr>
        <tr *ngFor="let user of pagedRoutes; index as i">
          <td class="text-center">
            P12
          </td>
          <td>
            Description
          </td>
          <td class="text-center">
            20
          </td>
          <td class="text-center">
            LKR 10,000
          </td>
          <td class="text-center">
            <div class="fw-semibold text-nowrap">LKR 1,230</div>
          </td>
          <td class="text-center">
            <!-- View -->
            <button cButton color="info" size="sm" variant="ghost" class="me-2" title="View">
              <svg cIcon name="cilCommand"></svg>
            </button>

            <!-- Edit -->
            <button cButton color="warning" size="sm" variant="ghost" class="me-2" title="Edit">
              <svg cIcon name="cilPencil"></svg>
            </button>

            <!-- Delete -->
            <button (click)="delete()" cButton color="danger" size="sm" variant="ghost" title="Delete">
              <svg cIcon name="cilTrash"></svg>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <app-paginator *ngIf="pagedRoutes.length !== 0" [totalItems]="users.length" [(pageSize)]="routePageSize"
      [(currentPage)]="currentRoutePage" (currentPageChange)="goToRoutePage($event)"
      (pageSizeChange)="onRoutePageSizeChange($event)"></app-paginator>
  </c-card-body>
</c-card>

<c-card class="mb-4">
  <c-card-body>
    <c-row class="justify-content-between">
      <c-col sm="5">
        <h4 class="card-title mb-4" id="employee-list">Half Payment Bills</h4>
      </c-col>
      <c-col xs="auto" class="mb-4">
        <form>
          <c-button-group class="float-end" role="group">
            <input class="btn-check" type="radio" value="Day" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Day</label>

            <input class="btn-check" type="radio" value="Month" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Month</label>

            <input class="btn-check" type="radio" value="Year" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Year</label>
          </c-button-group>
        </form>
      </c-col>
    </c-row>

    <table [hover]="true" [responsive]="true" [striped]="true" align="middle" cTable class="mb-0 border">
      <thead cTableColor="light">
        <tr>
          <th class="text-center">
            Product ID
          </th>
          <th>Description</th>
          <th class="text-center">Quantity</th>
          <th class="text-center">Price</th>
          <th class="text-center">Min Sale Price</th>
          <th class="text-center">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="!pagedUsers || pagedUsers.length === 0">
          <td colspan="6" class="text-center text-muted py-3">
            No data available
          </td>
        </tr>
        <tr *ngFor="let user of pagedUsers; index as i">
          <td class="text-center">
            P12
          </td>
          <td>
            Description
          </td>
          <td class="text-center">
            20
          </td>
          <td class="text-center">
            LKR 10,000
          </td>
          <td class="text-center">
            <div class="fw-semibold text-nowrap">LKR 1,230</div>
          </td>
          <td class="text-center">
            <!-- View -->
            <button cButton color="info" size="sm" variant="ghost" class="me-2" title="View">
              <svg cIcon name="cilCommand"></svg>
            </button>

            <!-- Edit -->
            <button cButton color="warning" size="sm" variant="ghost" class="me-2" title="Edit">
              <svg cIcon name="cilPencil"></svg>
            </button>

            <!-- Delete -->
            <button (click)="delete()" cButton color="danger" size="sm" variant="ghost" title="Delete">
              <svg cIcon name="cilTrash"></svg>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <app-paginator *ngIf="pagedUsers.length !== 0" [totalItems]="users.length" [(pageSize)]="userPageSize"
      [(currentPage)]="currentUserPage" (currentPageChange)="goToUserPage($event)"
      (pageSizeChange)="onUserPageSizeChange($event)"></app-paginator>
  </c-card-body>
</c-card>

<c-card class="mb-4">
  <c-card-body>
    <c-row>
      <c-col sm="5">
        <h4 class="card-title mb-0">Revenue Growth Overview</h4>
        <div class="small text-medium-emphasis">2025 - 2024</div>
      </c-col>
    </c-row>
    <c-chart [height]="300" type="line" [data]="chartLineData" [options]="chartOptions"></c-chart>
  </c-card-body>
</c-card>

<c-row>
  <c-col xs="12" lg="6">
    <c-card class="mb-4">
      <c-card-header>
        User-wise Collection
      </c-card-header>
      <c-col class="mt-4 d-flex justify-content-end" m="7">
        <form>
          <c-button-group class="float-end me-3" role="group">
            <input class="btn-check" type="radio" value="Day" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Day</label>

            <input class="btn-check" type="radio" value="Month" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Month</label>

            <input class="btn-check" type="radio" value="Year" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Year</label>
          </c-button-group>
        </form>
      </c-col>
      <c-card-body>
        <c-chart [height]="300" type="bar" [options]="chartOptions" [data]="chartBarData"></c-chart>
      </c-card-body>
    </c-card>
  </c-col>
  <c-col xs="12" lg="6">
    <c-card class="mb-4">
      <c-card-header>
        Employee-wise Collection
      </c-card-header>
      <c-col class="mt-4 d-flex justify-content-end" m="7">
        <form>
          <c-button-group class="float-end me-3" role="group">
            <input class="btn-check" type="radio" value="Day" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Day</label>

            <input class="btn-check" type="radio" value="Month" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Month</label>

            <input class="btn-check" type="radio" value="Year" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Year</label>
          </c-button-group>
        </form>
      </c-col>
      <c-card-body>
        <c-chart [height]="300" type="bar" [options]="chartOptions" [data]="chartBarData"></c-chart>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>
<c-row>
  <c-col xs="12" lg="6">
    <c-card class="mb-4">
      <c-card-header>
        Route-wise Collection
      </c-card-header>
      <c-col class="mt-4 d-flex justify-content-end" m="7">
        <form>
          <c-button-group class="float-end me-3" role="group">
            <input class="btn-check" type="radio" value="Day" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Day</label>

            <input class="btn-check" type="radio" value="Month" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Month</label>

            <input class="btn-check" type="radio" value="Year" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Year</label>
          </c-button-group>
        </form>
      </c-col>
      <c-card-body>
        <c-chart [height]="300" type="bar" [options]="chartOptions" [data]="chartBarData"></c-chart>
      </c-card-body>
    </c-card>
  </c-col>
  <c-col xs="12" lg="6">
    <c-card class="mb-4">
      <c-card-header>
        Collection by Payment Mode
      </c-card-header>
      <c-col class="mt-4 d-flex justify-content-end" m="7">
        <form>
          <c-button-group class="float-end me-3" role="group">
            <input class="btn-check" type="radio" value="Day" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Day</label>

            <input class="btn-check" type="radio" value="Month" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Month</label>

            <input class="btn-check" type="radio" value="Year" />
            <label cButton cFormCheckLabel color="secondary" variant="outline">Year</label>
          </c-button-group>
        </form>
      </c-col>
      <c-card-body>
        <c-chart [height]="300" type="pie" [options]="chartOptions" [data]="chartPieData"></c-chart>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>


<app-view-payment #paymentModal></app-view-payment>